# Virtual DOM

리액트의 주요 특징 중 하나는 Virtual DOM을 이용하는 것이다.

## DOM이란?

Document Object Model. 즉, 객체로 문서 구조를 표현하는 방법으로 XML이나 HTML로 작성한다.

웹 브라우저는 DOM을 활용하여 객체에 자바스크립트와 CSS를 적용한다. DOM은 트리 형태라서 특정 노드를 찾거나, 수정 제거 삽입할 수 있다.

### DOM은 과연 느린가?

DOM은 동적 UI에 최적화되어 있지않다는 치명적인 문제점이 있다. 정적인 HTML을 자바스크립트를 이용해 동적으로 만들 수 있는데, 요즘처럼 **규모가 큰 웹 애플리케이션에서 직접 DOM에 접근하여 변화를 주면 성능이 안 좋아진다**. 그러나 느려지는 것은 DOM이 아니다. DOM 자체는 빠르지만 웹 브라우저에서 변화가 일어났을 때 **브라우저가 CSS를 다시 연산하고 레이아웃을 구성하고, 페이지를 리페인트하는 과정에서 시간이 소요되는 것**이다.

### 해결법

HTML 마크업을 변환하는 것을 처리할 때 자원을 사용하는 것은 어쩔 수 없다. 대신 **DOM을 최소한으로 조작**하여 작업을 처리하는 방식으로 개선할 수 있다.

**리액트는 Virtual DOM 방식을 사용해 DOM 업데이트를 추상화함으로써 DOM 처리 횟수를 최소화하고 효율적으로 진행한다.**

## Virtual DOM

Virtual DOM을 사용하면 실제 DOM에 접근해서 조작하는 대신 **실제 DOM을 추상화한 자바스크립트 객체를 구성해서 사용**한다. 실제 DOM의 가벼운 사본이라고 볼 수 있다.

리액트에서 데이터가 변해서 웹 브라우저에 실제 DOM을 업데이트하는 과정은 다음과 같다.

1. 데이터를 업데이트하면 전체 UI를 **Virtual DOM에 리렌더링**
2. 이전 Virtual DOM에 있던 내용과 현재 Virtual DOM의 내용을 비교
3. 바뀐 부분만 실제 DOM에 적용

> render 함수를 호출하면 DOM이 아닌 컴포넌트를 생성하는 ReactCompositeComponent 객체와 DOM을 만들 때 생성하는 ReactDOMComponent 객체를 생성한다.
>
> 생성된 ReactDOMComponent와 ReactCompositeComponent 객체의 주요 작업들이 반복적으로 실행되면서 Virtual DOM을 생성한다.
>
> 일단은 render 함수 호출의 결과로 Virtual DOM이 생성된다고 하고 넘어간다.

## 기타 특징

다른 프레임워크들이 MVC 등의 구조를 지향하는 것과 다르게 리액트는 뷰만 담당하는 라이브러리이다. 다른 웹 프레임워크가 Ajax, 라우팅, 데이터 모델링과 같은 기능을 가지고 있는 반면 리액트는 다른 라이브러리를 사용하거나 직접 구현해야 한다.

라우팅은 react-router, Ajax 처리는 axios나 fetch, 상태 관리에는 redux나 Mobx를 사용하면 된다.